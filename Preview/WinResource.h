//////////////////////////////////////////////////////////////////////

#pragma once

//////////////////////////////////////////////////////////////////////

struct Resource
{
	Resource();
	virtual ~Resource();

	//////////////////////////////////////////////////////////////////////

	bool IsValid() const
	{
		return data != null;
	}

	//////////////////////////////////////////////////////////////////////

	operator void const *() const
	{
		return data;
	}

	//////////////////////////////////////////////////////////////////////

	size_t Size() const
	{
		return size;
	}

	//////////////////////////////////////////////////////////////////////

	uint32 Error() const
	{
		return error;
	}

	//////////////////////////////////////////////////////////////////////

	virtual void Release() = 0;

	//////////////////////////////////////////////////////////////////////

protected:

	void *		data;
	size_t		size;
	uint32		error;
};

//////////////////////////////////////////////////////////////////////

struct FileResource: Resource
{
	FileResource();
	FileResource(tchar const *name);
	~FileResource();
	void Release() override;
	void Load(tchar const *name);
};

//////////////////////////////////////////////////////////////////////

struct WinResource: Resource
{
	WinResource();
	WinResource(DWORD resourceID);
	~WinResource();
	void Release() override;
	void Load(DWORD resourceID);
};

//////////////////////////////////////////////////////////////////////

