//////////////////////////////////////////////////////////////////////

#include "stdafx.h"

//////////////////////////////////////////////////////////////////////

Resource::Resource()
	: data(null)
	, size(0)
{
}

//////////////////////////////////////////////////////////////////////

Resource::~Resource()
{
	assert(data == null);
	assert(size == 0);
}

//////////////////////////////////////////////////////////////////////

WinResource::WinResource()
	: Resource()
{
}

//////////////////////////////////////////////////////////////////////

WinResource::WinResource(DWORD resourceid)
	: Resource()
{
	Load(resourceid);
}

//////////////////////////////////////////////////////////////////////

WinResource::~WinResource()
{
	Release();
}

//////////////////////////////////////////////////////////////////////

void WinResource::Load(DWORD resourceid)
{
	Release();
	error = LoadResource(resourceid, &data, &size);
}

//////////////////////////////////////////////////////////////////////

void WinResource::Release()
{
	if(data != null)
	{
		FreeResource(data);
		data = null;
	}
	size = 0;
	error = S_OK;
}

//////////////////////////////////////////////////////////////////////

FileResource::FileResource()
	: Resource()
{
}

//////////////////////////////////////////////////////////////////////

FileResource::FileResource(tchar const *filename = null)
	: Resource()
{
	if(filename != null)
	{
		Load(filename);
	}
}

//////////////////////////////////////////////////////////////////////

FileResource::~FileResource()
{
	Release();
}

//////////////////////////////////////////////////////////////////////

void FileResource::Load(tchar const *filename)
{
	Release();
	error = LoadFile(filename, &data, &size);
}

//////////////////////////////////////////////////////////////////////

void FileResource::Release()
{
	Delete(data);
	size = 0;
	error = S_OK;
}

//////////////////////////////////////////////////////////////////////

